<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
		<title>js-draw demo</title>
		<link rel="manifest" href="./manifest.json"/>
		<link rel="shortcut icon" href="./icons/js-draw-icon-vector-medium.svg"/>
		<link rel="apple-touch-icon" href="./icons/js-draw-icon-medium.png"/>
		<style>
			#editorOptions {
				max-width: 400px;
				margin-left: auto;
				margin-right: auto;
				background-color: #ddd;
				border-radius: 4px;
				padding: 14px;

				font-family: sans-serif;
			}

			#editorOptions > ul > li {
				border-bottom: 1px solid gray;
			}

			#logOutput {
				display: none;
				width: 100vw;
				height: 90vh;
				z-index: 9999;

				color: orange;
				text-shadow: 0px 0px 3px black;
				background-color: rgba(0, 0, 0, 0.0);
				border: none;
				pointer-events: none;
				border-bottom: 1px solid red;

				position: fixed;
				top: 0;
				left: 0;
				right: 0;
			}

			@media (prefers-color-scheme: dark) {
				body {
					background-color: black;
					color: white;
				}

				#editorOptions {
					background-color: #222;
				}
			}

			#startButton {
				display: block;
				margin-left: auto;
				margin-right: auto;

				width: 100%;
				font-weight: bold;
			}

			.imageEditorContainer {
				width: 100vw;
				height: 100vh;
				position: fixed;
				top: 0;
				left: 0;
			}

			/* Container for the save popup. */
			.popupContainer iframe {
				width: 100vw;
				height: 100vh;

				border: none;
				padding: 0;
				margin: 0;

				background-color: rgba(0, 0, 0, 0.0);
			}

			.popupContainer {
				position: fixed;
				z-index: 100;
				top: 0;
				left: 0;
				bottom: 0;
				right: 0;

				padding: 0;

				--backdrop-filter: blur(6px) contrast(150%);
				backdrop-filter: var(--backdrop-filter);
				-webkit-backdrop-filter: var(--backdrop-filter);
			}
		</style>
	</head>
	<body>
		<!--
				This page is intended for <b>local</b> debugging and development of
				the image editor.

				To use it, start a server (like `python`'s
				`http.server` module) and open this page in a
				browser.

				For example `cd /path/to/ImageEditor/folder ; python3 -m http.server`.
		-->
		<div id="editorOptions">
			<h1>ImageEditor test page</h1>
			<p>Options for testing the image editor:</p>
			<noscript>JavaScript has been disabled!</noscript>
			<ul>
				<li>
					<input type="checkbox" id="alertOnError"/><label for="alertOnError">
						Display error messages (useful for debugging on mobile devices).
					</label>
				</li>
				<li>
					<label for="initialData">
						SVG image to load (paste the contents of a saved SVG here).
						This can be empty.
					</label><textarea id="initialData"></textarea>
				</li>
				<li>
					<label for="initialFile">Alternatively, select an SVG to upload:</label>
					<input type="file" id="initialFile" accept='image/svg,image/svg+xml,text/plain'/>
				</li>
			</ul>
			<button id="startButton">Start Editor</button>
		</div>
		<textarea id="logOutput">
		</textarea>
	</body>
	<script src='example.bundle.js'></script>
	<script>
		navigator.serviceWorker?.register('./sw.js')?.catch(err => {
			console.warn('Error registering service worker,', err);
		});
	</script>
</html>
